{% extends "two_factor/_base_focus.html" %}
{% load i18n %}
{% load static %}

<!-- specific page css goes here  -->
{% block stylesheets %}
<link href="{% static 'assets/css/ellie.css' %}" rel="stylesheet" />
<link href="{% static 'assets/css/navbar.css' %}" rel="stylesheet" />


{% endblock stylesheets %}




{% block content %}

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-auto bg-dark sticky-top">
      <div class="d-flex flex-sm-column flex-row flex-nowrap bg-dark align-items-center sticky-top">
	<ul
	  class="nav nav-pills nav-flush flex-sm-column flex-row flex-nowrap mb-auto mx-auto text-center justify-content-between w-100 px-2 align-items-center">
	  <li class="nav-item">
	    <a href="/security" class="nav-link py-3 px-2" title="" data-bs-toggle="tooltip"
	       data-bs-placement="right" data-bs-original-title="Home">
	      <i class="bi bi-back fs-1"></i>
	    </a>
	  </li>
	</ul>
      </div>
    </div>
    <div class="col-sm p-3 min-vh-100">
      <!-- content -->
      
      <div class="row">
	<div class="col-md-12">
	  <div class="card card-profile">
	    <div class="card-body">

	      <h1>{% block title %}{% trans "Enable Two-Factor Authentication" %}{% endblock %}</h1>
	      {% if wizard.steps.current == 'welcome' %}
	      <p>{% blocktrans trimmed %}You are about to take your account security to the
		next level. Follow the steps in this wizard to enable two-factor
		authentication.{% endblocktrans %}</p>
	      {% elif wizard.steps.current == 'method' %}
	      <p>{% blocktrans trimmed %}Please select which authentication method you would
		like to use.{% endblocktrans %}</p>
	      {% elif wizard.steps.current == 'generator' %}
	      <p>{% blocktrans trimmed %}To start using a token generator, please use your
		smartphone to scan the QR code below. For example, use Google
		Authenticator. Then, enter the token generated by the app.
		{% endblocktrans %}</p>
	      <p><img src="{{ QR_URL }}" alt="QR Code" /></p>
	      {% elif wizard.steps.current == 'sms' %}
	      <p>{% blocktrans trimmed %}Please enter the phone number you wish to receive the
		text messages on. This number will be validated in the next step.
		{% endblocktrans %}</p>
	      {% elif wizard.steps.current == 'call' %}
	      <p>{% blocktrans trimmed %}Please enter the phone number you wish to be called on.
		This number will be validated in the next step. {% endblocktrans %}</p>
	      {% elif wizard.steps.current == 'validation' %}
	      {% if challenge_succeeded %}
	      {% if device.method == 'call' %}
	      <p>{% blocktrans trimmed %}We are calling your phone right now, please enter the
		digits you hear.{% endblocktrans %}</p>
	      {% elif device.method == 'sms' %}
	      <p>{% blocktrans trimmed %}We sent you a text message, please enter the tokens we
		sent.{% endblocktrans %}</p>
	      {% endif %}
	      {% else %}
	      <p class="alert alert-warning" role="alert">{% blocktrans trimmed %}We've
		encountered an issue with the selected authentication method. Please
		go back and verify that you entered your information correctly, try
		again, or use a different authentication method instead. If the issue
		persists, contact the site administrator.{% endblocktrans %}</p>
	      {% endif %}
	      {% elif wizard.steps.current == 'yubikey' %}
	      <p>{% blocktrans trimmed %}To identify and verify your YubiKey, please insert a
		token in the field below. Your YubiKey will be linked to your
		account.{% endblocktrans %}</p>
	      {% endif %}
	      <form action="" method="post">{% csrf_token %}
		{% include "two_factor/_wizard_forms.html" %}

		{# hidden submit button to enable [enter] key #}
		<input type="submit" value="" class="d-none" />

		{% include "two_factor/_wizard_actions.html" %}
	      </form>
	    </div>
	  </div>
	</div>
      </div>

    </div>
  </div>
</div>

 
{% endblock %}
